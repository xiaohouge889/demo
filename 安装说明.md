# 项目安装和启动指南

## 前置要求

1. **Node.js 18+ 和 npm**
   - 下载地址：https://nodejs.org/
   - 选择 LTS 版本下载并安装
   - 安装后重启命令行窗口

2. **MySQL 数据库**（可选，如果需要邮件功能）
   - 下载地址：https://dev.mysql.com/downloads/mysql/
   - 或使用 XAMPP、WAMP 等集成环境

## 安装步骤

### 1. 安装 Node.js

1. 访问 https://nodejs.org/
2. 下载 LTS 版本（推荐 v18 或 v20）
3. 运行安装程序，全部选择默认选项
4. **重要**：安装完成后重启命令行窗口

验证安装：
```bash
node --version
npm --version
```

### 2. 安装项目依赖

在项目根目录执行：

```bash
npm run install:all
```

这会安装：
- 根目录依赖（concurrently）
- 前端依赖（React、Vite 等）
- 后端依赖（Express、MySQL2 等）

如果上面的命令失败，可以分别安装：

```bash
# 安装根目录依赖
npm install

# 安装前端依赖
cd frontend
npm install
cd ..

# 安装后端依赖
cd backend
npm install
cd ..
```

### 3. 配置数据库（如果需要完整功能）

1. 创建 MySQL 数据库
2. 复制 `backend/.env.example` 为 `backend/.env`（如果存在）
3. 编辑 `backend/.env` 配置数据库连接信息
4. 运行数据库初始化：
   ```bash
   cd backend
   npm run init-db
   ```

### 4. 启动开发服务器

在项目根目录执行：

```bash
npm run dev
```

这会同时启动：
- 前端服务：http://localhost:5173
- 后端服务：http://localhost:3000

### 5. 访问应用

在浏览器中打开：
```
http://localhost:5173
```

## 常见问题

### 问题1：提示 "node 不是内部或外部命令"
**解决**：Node.js 未安装或未添加到系统环境变量
- 重新安装 Node.js，确保勾选 "Add to PATH"
- 安装后重启命令行窗口

### 问题2：npm install 失败
**解决**：
- 检查网络连接
- 尝试使用国内镜像：
  ```bash
  npm config set registry https://registry.npmmirror.com
  ```
- 清理缓存后重试：
  ```bash
  npm cache clean --force
  ```

### 问题3：端口被占用
**解决**：
- 关闭占用端口的程序
- 或修改配置文件中的端口号

### 问题4：数据库连接失败
**解决**：
- 确保 MySQL 服务已启动
- 检查 `backend/.env` 中的数据库配置
- 确保数据库已创建

## 快速启动（最小配置）

如果只需要测试前端功能，可以：

1. 安装 Node.js
2. 安装依赖：`npm run install:all`
3. 只启动前端：
   ```bash
   cd frontend
   npm run dev
   ```
4. 访问 http://localhost:5173

注意：不启动后端时，部分功能（如打卡、设置保存）会失败，但可以查看界面。
